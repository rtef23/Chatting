drop table mem_meta;
drop table friend_list;
drop table chat_log;
drop table chat_room;
drop table member;

create table member (
	id char(30) not null unique,
	nickname varchar(40) not null, 
	password char(30) not null,
	name char(20) not null,
	primary key(id)	
);
create table friend_list(
	main_id char(30),
	sub_id char(30),
	foreign key(main_id) references member(id) on delete cascade on update cascade,
	foreign key(sub_id) references member(id) on delete cascade on update cascade,
	primary key(main_id, sub_id)
);
create table mem_meta(
	user_id char(30) not null,
	last_login datetime,
	isOnline boolean,
	foreign key(user_id) references member(id) on delete cascade on update cascade
);
create table chat_room(
	user_id char(30) not null,
	room_id int(20) AUTO_INCREMENT,
	foreign key(user_id) references member(id) on delete cascade on update cascade,
	primary key(room_id, user_id)
);
create table chat_log(
	log_id int(255) AUTO_INCREMENT,
	user_id char(30) not null,
	room_id int(20) not null,
	time char(10) not null,
	content char(255),
	foreign key(user_id) references member(id) on delete cascade on update cascade,
	foreign key(room_id) references chat_room(room_id) on delete cascade on update cascade,
	primary key(log_id)
);