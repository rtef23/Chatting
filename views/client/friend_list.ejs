<style>
div#friend_main{
	width : 19%;
	height : 100%;
	margin-left:0.2%;
	margin-right:0.8%;
	float:left;
}
div#friend_interface{
	height:20%;
}
div#friend_list_up_div{
	height:80%;
}
</style>
<div class='friend_main' id="friend_main">
	<div id="friend_list_up_div">
		<ul class='list-group' id="friend_list_up">
		</ul>
	</div>
	<div id="friend_interface">
		<button type="button" id='addfriend' class="btn btn-default btn-sm">
			<span class="glyphicon glyphicon-plus"></span> Add Friend
		</button>
	</div>
</div>
<script text="text/javascript">
socket.emit('req_friend_list');
socket.on('update_friend_list', function(msg2){
	updateFriendList(JSON.parse(msg2));
});
var updateFriendList = function(data){
	switch(data.result){
		case 0:
			alert('can\'t get friend list\n please try again');
			break;
		case 1:
		{
			$('ul[id=friend_list_up]').empty();

			$.ajax({
				url : '/friend_card',
				method : 'GET',
				success : function(msg){
					var cp_msg;
					for(var i in data.data){
						cp_msg = msg;
						cp_msg = cp_msg.replace(/%friend_id%/gi, data.data[i].fid);
						if(data.data[i].isOnline == 1)
							cp_msg = cp_msg.replace(/%symbol_glyph%/gi, '<span class="label label-success">Online</span>');
						else
							cp_msg = cp_msg.replace(/%symbol_glyph%/gi, '<span class="label label-danger">Offline</span>');
						$('<li />').attr('class', 'list-group-item').html(cp_msg).appendTo('ul[id=friend_list_up]');
					}
				}
			});
		}
			break;
	}
}
$('button[id=addfriend]').click(function(){
	
});
</script>