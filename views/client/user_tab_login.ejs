<style>
	div
	#row_user_info{
		width:100%;
		height:100%;
		background-color:#cce5ff;
	}
	span
	#left{
		//width:50%;
		//height:100%;
		//background-color:red;
		//text-align:left;
		float:left;
	}
	#right{
		//width:50%;
		//height:100%;
		//background-color:green;
		//text-align:right;
		float:right;
	}
</style>

<div id="row_user_info">
	<p>
	<span id="left">
		<a href="" onclick="javascript:render_chatting_main();">
			<img id = "logo" src = "/img?file_path='images/logo.jpg'" width = 50 height = 50></img>
		</a>
	</span>
	<span id="right">
		<a href="" onclick="javascript:render_chatting_main();"><B id='yourID'></B></a>
		<input type="button" id="user_info" value="my info" />
		<input type="button" id="logout" value="Sign out" />
	</span>
	</p>
</div>

<script>
	function render_chatting_main(){
		$.ajax({
			type : 'GET',
			url : '/chatting_main',
			success : function(res){
				$('div[id=col2]').html(res);
			}
		});
	}
	$('img[id=logo]').click(function(){
		$(location).attr("href", "/chatting");
	});

	$('input[id=user_info]').click(function(){
		socket.emit('whoami');
		socket.on('youare', function(msg){
			alert('a');
			var msg_data = JSON.parse(msg);
			$.ajax({
				type : 'POST',
				url : '/member_info',
				data : {id : msg_data.id},
				success : function(res){
					var res_data = JSON.parse(res);
					switch(res_data.result){
						case 0:
						{
							alert("error on server\ntry again");
						}
						break;
						case 1:
						{
							$.ajax({
								type : 'GET',
								url : '/user_info',
								data : res_data.data,
								success : function(res1){
									$('div[id=col2]').html(res1);
								}
							});
						}
						break;
					}
				}
			});
		});
	});
		

	$('#logout').click(function(){
		socket.emit('disconnect');
		window.location.replace('/');
	});
</script>